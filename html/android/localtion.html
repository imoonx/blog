<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http - equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width initial-scale=1, user-scalable=no,minimal-ui">
    <meta name="renderer" content="webkit">
    <meta http - equiv="Cache-Control" content="no-siteapp">
    <!-- 主题色 只适合谷歌 -->
    <meta name="theme-color" content="#f68e5f">
    <!-- Safari和Windows Phone的IE -->
    <!-- <meta name="msapplication-navbutton-color" content="#fff"> -->
    <!-- 强制移动设备以app模式打开页面(即在移动设备下全屏，仅支持部分浏览器) -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!--UC强制全屏-->
    <meta name="full-screen" content="yes">
    <!--UC应用模式-->
    <meta name="browsermode" content="application">
    <!--QQ强制全屏-->
    <meta name="x5-fullscreen" content="true">
    <!--QQ应用模式-->
    <meta name="x5-page-mode" content="app">
    <!-- favicon图标 -->
    <link rel="shortcut icon" href="https://blog.imoonx.com/img/favicon.ico">
    <title>xuan | 后台定位</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/small.css">
</head>

<body>

    <div class="bg-orange sen-top-div"></div>

    <div class="content-info">

        <span class="title">Android 后台定位，定时上传</span>

        <p>
            需求：
            根据后台规定时间段，时间间隔上传位置信息
        </p>
        <p>
            尝试的方法：
            <br />
            1.使用极光推送，后台推送消息手机端进行定位获取位置信息上传
            2.开启服务按照时间间隔上传位置信息
        </p>
        <p>
            缺点：
            <br />
            第一种方法：
            <br />
            受限于极光后台；当应用未启动时接收不到消息无法进行通信；再次启动时会收到多条消息，发送多条信息
            <br />
            第二种方法：
            <br />
            受限于用户的启动时间，不能做到准点发送以上两种方法也能做到信息上传，但都不很理想。
        </p>
        <p>
            经过多次尝试，最后动态注册事件变化进行定位获取位置信息首先，监听开机广播，在开机广播中开启定位服务，需要加入开机广播权限，如下：
            <img src="../../img/localtion_1.png">
            在定位服务中动态注册时间变化广播：
            <img src="../../img/localtion_2.png">
            在BroadcastReceiver中获取当前时间，判断是否在规定范围内，如果在使用百度定位获取当前位置信息上传。
            <img src="../../img/localtion_3.png">
        </p>
    </div>

    <script src="../../js/jquery-3.3.1.min.js"></script>
    <script src="../../js/index-data.min.js"></script>
    <script src="../../js/index-nav.min.js"></script>
    <script src="../../js/daohang.min.js"></script>
</body>

</html>